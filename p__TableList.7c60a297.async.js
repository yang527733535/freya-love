(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[947],{65628:function(he,M,e){"use strict";e.r(M),e.d(M,{default:function(){return oe}});var ve=e(40279),U=e(88591),D=e(66940),ge=e(64049),J=e(43334),C=e(28211),Q=e(70486),g=e.n(Q),y=e(59301),V=e(60615),Y=e(50553),b=e(1047),W=e(45103),k=e(37793),fe=e(81130),q=e(59840),pe=e(41505),o=e(79538),ye=e(58408),I=e(36838),xe=e(71838),_=e(99128),i=e(36531),ee=e(7217),K=e.n(ee),te=e(21895),ae=e.n(te),t=e(37712),re=function(f){return Number(Math.random().toString().substr(3,f)+Date.now()).toString(36)},ne=function(){var f=(0,y.useState)(""),u=(0,C.Z)(f,2),P=u[0],a=u[1],c=(0,y.useState)(""),r=(0,C.Z)(c,2),z=r[0],T=r[1],B=(0,y.useState)([]),p=(0,C.Z)(B,2),h=p[0],s=p[1],E={labelCol:{span:6},wrapperCol:{span:16}},d=function(){var v=(0,D.Z)(g().mark(function l(n){var x,Z,j;return g().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return delete n.avatar,delete n.image,delete n.key,x=h.map(function(R){return R.imgurl}).join(","),Z=(0,i.Z)((0,i.Z)({},n),{},{ImgUrl:x}),m.next=7,(0,W.eC)(Z);case 7:j=m.sent,j.code===200&&_.default.success("\u521B\u5EFA\u6210\u529F");case 9:case"end":return m.stop()}},l)}));return function(n){return v.apply(this,arguments)}}();function ie(v){return N.apply(this,arguments)}function N(){return N=(0,D.Z)(g().mark(function v(l){var n,x,Z,j,$,m,R;return g().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return n=l.file,x=l.headers,Z=l.onError,j=l.onProgress,$=l.onSuccess,m=l.withCredentials,R={FileName:n.name},A.next=4,K()({method:"post",url:"http://117.50.173.128:8081/api/upload",data:ae().stringify(R)}).then(function(w){var O=w.data.data.put,ue=w.data.data.get,X=w.data.data.key,H=new FileReader;H.readAsArrayBuffer(n);var L=null;H.onload=function(de){L=de.target.result,console.log("fileData: ",L),console.log("123----imagetoken",O),K().put(O,L,{withCredentials:m,headers:x,onUploadProgress:function(S){var me=S.total,ce=S.loaded;j({percent:Math.round(ce/me*100).toFixed(2)},n)}}).then(function(G){console.log(G),$(G,n),T(ue),a(X);var S={id:re(10),imgurl:X};console.log(S),s([].concat((0,k.Z)(h),[S]))}).catch(Z)}});case 4:case"end":return A.stop()}},v)})),N.apply(this,arguments)}return(0,t.jsx)("div",{children:(0,t.jsxs)(o.Z,(0,i.Z)((0,i.Z)({},E),{},{name:"nest-messages",onFinish:d,children:[(0,t.jsx)(o.Z.Item,{name:"Title",label:"\u6807\u9898",rules:[{required:!0}],children:(0,t.jsx)(I.Z,{})}),(0,t.jsx)(o.Z.Item,{name:"Content",label:"\u5185\u5BB9",rules:[{required:!0}],children:(0,t.jsx)(I.Z.TextArea,{})}),(0,t.jsx)(o.Z.Item,{name:"CategoryId",label:"\u5206\u7C7B",rules:[{required:!0}],children:(0,t.jsx)(I.Z,{})}),(0,t.jsx)(o.Z.Item,{name:"ShowTime",label:"\u5C55\u793A\u65F6\u95F4",rules:[{required:!0}],children:(0,t.jsx)(I.Z,{})}),(0,t.jsx)(o.Z.Item,{name:"image",label:"\u56FE\u7247",rules:[{required:!1}],children:(0,t.jsx)(q.Z,{headers:{"Content-Type":"image/png"},name:"avatar",className:"avatar-uploader",showUploadList:!1,customRequest:ie,children:(0,t.jsx)(U.Z,{children:"\u4E0A\u4F20"})})}),(0,t.jsx)(o.Z.Item,{wrapperCol:(0,i.Z)((0,i.Z)({},E.wrapperCol),{},{offset:8})}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:h.map(function(v){return(0,t.jsxs)("div",{style:{position:"relative",width:120,height:120},children:[(0,t.jsx)("div",{style:{position:"absolute",right:20,top:-12,fontSize:30,fontWeight:700,color:"red",cursor:"pointer"},children:"X"}),(0,t.jsx)("img",{style:{width:100,height:100},src:"http://myasd.oss-cn-beijing.aliyuncs.com/"+v.imgurl,alt:""})]},v.id)})}),(0,t.jsx)("img",{src:"",alt:""}),(0,t.jsx)(o.Z.Item,{wrapperCol:(0,i.Z)((0,i.Z)({},E.wrapperCol),{},{offset:8}),children:(0,t.jsx)(U.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})},se=ne,le=[{dataIndex:"id",title:"ID",copyable:!0,ellipsis:!0},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{title:"\u5C55\u793A\u65F6\u95F4",dataIndex:"show_time",sorter:!0,hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created_at",dataIndex:"created_at",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(f,u,P,a){return[(0,t.jsx)("a",{onClick:function(){var r;a==null||(r=a.startEditable)===null||r===void 0||r.call(a,u.id)},children:"\u7F16\u8F91"},"editable"),(0,t.jsx)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",children:"\u67E5\u770B"},"view"),(0,t.jsx)(b.Z,{onSelect:function(){return a==null?void 0:a.reload()},menus:[{key:"copy",name:"\u590D\u5236"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];function oe(){var F=(0,y.useRef)(),f=(0,y.useState)(),u=(0,C.Z)(f,2),P=u[0],a=u[1];return(0,t.jsxs)("div",{children:[(0,t.jsx)(J.Z,{onCancel:function(){a(!1)},footer:null,visible:P,children:(0,t.jsx)(se,{})}),(0,t.jsx)(Y.ZP,{columns:le,actionRef:F,request:(0,D.Z)(g().mark(function c(){var r,z,T,B,p,h,s=arguments;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=s.length>0&&s[0]!==void 0?s[0]:{},z=s.length>1?s[1]:void 0,T=s.length>2?s[2]:void 0,console.log(z,T),B={pageNum:r.current,pageSize:r.pageSize},d.next=7,(0,W.TB)(B);case 7:return p=d.sent,h=p.data.data,console.log("list: ",h),d.abrupt("return",Promise.resolve({data:h,success:!0,total:p.data.total}));case 11:case"end":return d.stop()}},c)})),rowKey:"id",search:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u56FE\u7247\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(U.Z,{onClick:function(){a(!0)},icon:(0,t.jsx)(V.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")]}})]})}}}]);
