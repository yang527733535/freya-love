(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[658],{54975:function(ae,z,e){"use strict";e.r(z),e.d(z,{default:function(){return te}});var le=e(40279),V=e(88591),H=e(66940),ne=e(64049),X=e(43334),f=e(28211),k=e(70486),F=e.n(k),i=e(59301),J=e(60615),Q=e(57848),D=e(45103),re=e(81130),P=e(59840),se=e(7156),K=e(77428),oe=e(58408),E=e(36838),n=e(36531),de=e(71838),x=e(99128),ie=e(41505),u=e(79538),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},b=A,$=e(23986),G=function(h,m){return i.createElement($.Z,(0,n.Z)((0,n.Z)({},h),{},{ref:m,icon:b}))};G.displayName="UploadOutlined";var L=i.forwardRef(G),w=e(28950),q=e.n(w),t=e(37712),_=function(h){var m=h.closeModal,S=h.clickItem,l=S===void 0?null:S,O=u.Z.useForm(),C=(0,f.Z)(O,1),y=C[0],W=(0,i.useState)(),g=(0,f.Z)(W,2),U=g[0],Y=g[1],M={name:"special_effects",action:"http://dev-chapters-back.stardustgod.com/api/common/uploadSpecialEffects",headers:{Authorization:"Bearer eyJpdiI6IlRFTjZTK0Y3VnFsNFZZS2dOZ0FQMGc9PSIsInZhbHVlIjoibG44NDVIMUJtODdBeGR2ajl5ekU2SnZobDZtNXgyN2I1QnNwOGFnRUNtbjZ6allnWmJ4VFwvWm1MTFpXdTk4blpjcWRBOGlSNkNLMWtnTkZ3eXFYSXVHelprZjJpZml5WjNXdVBGZnRIK3hhYmZZZHJsQlc5WGN5eXVvUUFOQytZaGkzMkY0aTNkOE9XY3VOdzJwVXBlYTRPenlBTDhxcFkrbDRydXdsZDNrZ09iY3ljQzZSM0hHdEVNOFNPZXlBRU5PVXNSRDBKS2FyaWpmc1pDTStKa0s5V2pDSjMzQmlPSmZFNTlXTE5LcFE1TUM1ZDVZS1lKMlFrcnlPY1B0bWRhM0I2dVwvWU9MSmR6NzdMcDJBcFFnaU5RcWhFcUdEVW9TaExCNys2QUo5UXp0dndGTCszakdtUlpxZEtOUEx4NDc5emJnWDJjbFdzVERFN09PWnB4OHZCU3BYVU1xQlI3MnhjaE80MklKdWxTZTNWeCs1YnhHTlU5SEhxV2hDbHN3K2F1MUR2cFU5Qk1cL2hTd0NtTklKUGgzMlRyQncyVWtcL21zcUxmS1dhcXFJZmN3UGlrNXB5UHNONlA1UmE1VzFUZEpyc2YrMzR2a3pMUWplZENsbnhTUmdHSG50eEZlZ3JObzlGelJWdXdXOW9WZmQ1OWVjSk03NDZ4TDJaMDBqOVlHOW5VQjVkUHVmT292ajZxdjZXdz09IiwibWFjIjoiNmZmM2IxYWJmNDk4NWM5ZWY5ODE2ZjZhZGViMjZjM2Q1NDk4ZDEzOGExYWFjZDlmZTI1ZjcxNTE0NDg0NzFiZCJ9"},onChange:function(r){if(r.file.status!=="uploading",r.file.status==="done"){var o=r.file.response.data;Y(o.url),x.default.success("".concat(r.file.name," file uploaded successfully"))}else r.file.status==="error"&&x.default.error("".concat(r.file.name," file upload failed."))}},j={labelCol:{span:6},wrapperCol:{span:16}},N=function(){var v=(0,H.Z)(F().mark(function r(o){var a,d,c;return F().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(delete o.avatar,delete o.image,delete o.key,a=(0,n.Z)((0,n.Z)({},o),{},{VideoUrl:U}),a.ShowTime=o.ShowTime.format("YYYY-MM-DD HH:mm:ss"),l){s.next=13;break}return console.log(a),s.next=9,(0,D.M$)(a);case 9:d=s.sent,d.code===200&&(m(),x.default.success("\u521B\u5EFA\u6210\u529F")),s.next=18;break;case 13:return a.id=l.id,s.next=16,(0,D.HH)(a);case 16:c=s.sent,c.code===200&&(m(),x.default.success("\u521B\u5EFA\u6210\u529F"));case 18:case"end":return s.stop()}},r)}));return function(o){return v.apply(this,arguments)}}();return(0,i.useEffect)(function(){if(l){console.log("clickItem: ",l);var v={Title:l.title,Content:l.content,CategoryId:l.category_id,ShowTime:q()(l.show_time,"YYYY-MM-DD HH:mm:ss")};y.setFieldsValue(v)}},[]),(0,t.jsx)("div",{children:(0,t.jsxs)(u.Z,(0,n.Z)((0,n.Z)({form:y,initialValues:{CategoryId:6}},j),{},{name:"nest-messages",onFinish:N,children:[(0,t.jsx)(u.Z.Item,{name:"Title",label:"\u6807\u9898",rules:[{required:!0}],children:(0,t.jsx)(E.Z,{})}),(0,t.jsx)(u.Z.Item,{name:"Content",label:"\u5185\u5BB9",rules:[{required:!0}],children:(0,t.jsx)(E.Z.TextArea,{})}),(0,t.jsx)(u.Z.Item,{name:"CategoryId",label:"\u5206\u7C7B",rules:[{required:!0}],children:(0,t.jsx)(E.Z,{})}),(0,t.jsx)(u.Z.Item,{name:"ShowTime",label:"\u5C55\u793A\u65F6\u95F4",rules:[{required:!0}],children:(0,t.jsx)(K.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})}),(0,t.jsx)(u.Z.Item,{name:"image",label:"\u89C6\u9891",rules:[{required:!1}],children:(0,t.jsx)(P.Z,(0,n.Z)((0,n.Z)({},M),{},{children:(0,t.jsx)(V.Z,{icon:(0,t.jsx)(L,{}),children:"Click to Upload"})}))}),(0,t.jsx)(u.Z.Item,{wrapperCol:(0,n.Z)((0,n.Z)({},j.wrapperCol),{},{offset:8})}),(0,t.jsx)(u.Z.Item,{wrapperCol:(0,n.Z)((0,n.Z)({},j.wrapperCol),{},{offset:8}),children:(0,t.jsx)(V.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})},ee=_;function te(){var I=(0,i.useRef)(),h=(0,i.useState)(),m=(0,f.Z)(h,2),S=m[0],l=m[1],O=(0,i.useState)(),C=(0,f.Z)(O,2),y=C[0],W=C[1],g=(0,i.useState)(!1),U=(0,f.Z)(g,2),Y=U[0],M=U[1],j=(0,i.useState)(),N=(0,f.Z)(j,2),v=N[0],r=N[1],o=[{dataIndex:"id",title:"ID",copyable:!0,ellipsis:!0},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{title:"\u89C6\u9891\u5730\u5740",dataIndex:"video_url",render:function(d){return(0,t.jsx)("a",{onClick:function(){M(!0),W(d)},children:"\u9884\u89C8\u89C6\u9891"})}},{title:"\u5C55\u793A\u65F6\u95F4",dataIndex:"show_time",sorter:!0,hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created_at",dataIndex:"created_at",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(d,c){return(0,t.jsx)("a",{onClick:function(){r(c),l(!0)},children:"\u4FEE\u6539"})}}];return(0,t.jsxs)("div",{children:[(0,t.jsx)(X.Z,{destroyOnClose:!0,onCancel:function(){M(!1)},title:"\u67E5\u770B\u89C6\u9891",visible:Y,children:(0,t.jsx)("video",{style:{width:"100%"},controls:!0,src:"http://cdnoss.stardustgod.com/".concat(y),children:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002"})}),(0,t.jsx)(X.Z,{onCancel:function(){l(!1)},footer:null,visible:S,destroyOnClose:!0,afterClose:function(){r(void 0)},children:(0,t.jsx)(ee,{clickItem:v,closeModal:function(){l(!1),I.current.reload()}})}),(0,t.jsx)(Q.ZP,{columns:o,actionRef:I,request:(0,H.Z)(F().mark(function a(){var d,c,T,s,B,R,Z=arguments;return F().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=Z.length>0&&Z[0]!==void 0?Z[0]:{},c=Z.length>1?Z[1]:void 0,T=Z.length>2?Z[2]:void 0,console.log(c,T),s={pageNum:d.current,pageSize:d.pageSize},p.next=7,(0,D.hF)(s);case 7:return B=p.sent,R=B.data.data,console.log("list: ",R),p.abrupt("return",Promise.resolve({data:R,success:!0,total:B.data.total}));case 11:case"end":return p.stop()}},a)})),rowKey:"id",search:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u89C6\u9891\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(V.Z,{onClick:function(){l(!0)},icon:(0,t.jsx)(J.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")]}})]})}}}]);
