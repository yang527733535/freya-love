(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[658],{54975:function(w,O,e){"use strict";e.r(O),e.d(O,{default:function(){return L}});var q=e(40279),M=e(88591),W=e(66940),_=e(64049),R=e(43334),j=e(28211),z=e(70486),F=e.n(z),c=e(59301),B=e(60615),H=e(57848),C=e(45103),ee=e(81130),X=e(59840),te=e(7156),G=e(77428),ae=e(58408),V=e(36838),r=e(36531),le=e(71838),I=e(99128),ne=e(41505),s=e(79538),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},k=J,Q=e(23986),Y=function(v,m){return c.createElement(Q.Z,(0,r.Z)((0,r.Z)({},v),{},{ref:m,icon:k}))};Y.displayName="UploadOutlined";var P=c.forwardRef(Y),K=e(28950),A=e.n(K),t=e(37712),$=function(v){var m=v.closeModal,x=v.clickItem,l=x===void 0?null:x,D=s.Z.useForm(),y=(0,j.Z)(D,1),U=y[0],N=(0,c.useState)(),S=(0,j.Z)(N,2),i=S[0],Z=S[1],p={name:"special_effects",action:"http://dev-chapters-back.stardustgod.com/api/common/uploadSpecialEffects",headers:{Authorization:"Bearer eyJpdiI6IlRFTjZTK0Y3VnFsNFZZS2dOZ0FQMGc9PSIsInZhbHVlIjoibG44NDVIMUJtODdBeGR2ajl5ekU2SnZobDZtNXgyN2I1QnNwOGFnRUNtbjZ6allnWmJ4VFwvWm1MTFpXdTk4blpjcWRBOGlSNkNLMWtnTkZ3eXFYSXVHelprZjJpZml5WjNXdVBGZnRIK3hhYmZZZHJsQlc5WGN5eXVvUUFOQytZaGkzMkY0aTNkOE9XY3VOdzJwVXBlYTRPenlBTDhxcFkrbDRydXdsZDNrZ09iY3ljQzZSM0hHdEVNOFNPZXlBRU5PVXNSRDBKS2FyaWpmc1pDTStKa0s5V2pDSjMzQmlPSmZFNTlXTE5LcFE1TUM1ZDVZS1lKMlFrcnlPY1B0bWRhM0I2dVwvWU9MSmR6NzdMcDJBcFFnaU5RcWhFcUdEVW9TaExCNys2QUo5UXp0dndGTCszakdtUlpxZEtOUEx4NDc5emJnWDJjbFdzVERFN09PWnB4OHZCU3BYVU1xQlI3MnhjaE80MklKdWxTZTNWeCs1YnhHTlU5SEhxV2hDbHN3K2F1MUR2cFU5Qk1cL2hTd0NtTklKUGgzMlRyQncyVWtcL21zcUxmS1dhcXFJZmN3UGlrNXB5UHNONlA1UmE1VzFUZEpyc2YrMzR2a3pMUWplZENsbnhTUmdHSG50eEZlZ3JObzlGelJWdXdXOW9WZmQ1OWVjSk03NDZ4TDJaMDBqOVlHOW5VQjVkUHVmT292ajZxdjZXdz09IiwibWFjIjoiNmZmM2IxYWJmNDk4NWM5ZWY5ODE2ZjZhZGViMjZjM2Q1NDk4ZDEzOGExYWFjZDlmZTI1ZjcxNTE0NDg0NzFiZCJ9"},onChange:function(n){if(n.file.status!=="uploading",n.file.status==="done"){var a=n.file.response.data;Z(a.url),I.default.success("".concat(n.file.name," file uploaded successfully"))}else n.file.status==="error"&&I.default.error("".concat(n.file.name," file upload failed."))}},f={labelCol:{span:6},wrapperCol:{span:16}},T=function(){var u=(0,W.Z)(F().mark(function n(a){var h,o,E;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(delete a.avatar,delete a.image,delete a.key,h=(0,r.Z)((0,r.Z)({},a),{},{VideoUrl:i}),h.ShowTime=a.ShowTime.format("YYYY-MM-DD HH:mm:ss"),l){d.next=13;break}return console.log(h),d.next=9,(0,C.M$)(h);case 9:o=d.sent,o.code===200&&(m(),I.default.success("\u521B\u5EFA\u6210\u529F")),d.next=18;break;case 13:return h.id=l.id,d.next=16,(0,C.HH)(h);case 16:E=d.sent,E.code===200&&(m(),I.default.success("\u521B\u5EFA\u6210\u529F"));case 18:case"end":return d.stop()}},n)}));return function(a){return u.apply(this,arguments)}}();return(0,c.useEffect)(function(){if(l){console.log("clickItem: ",l);var u={Title:l.title,Content:l.content,CategoryId:l.category_id,ShowTime:A()(l.show_time,"YYYY-MM-DD HH:mm:ss")};U.setFieldsValue(u)}},[]),(0,t.jsx)("div",{children:(0,t.jsxs)(s.Z,(0,r.Z)((0,r.Z)({form:U,initialValues:{CategoryId:6}},f),{},{name:"nest-messages",onFinish:T,children:[(0,t.jsx)(s.Z.Item,{name:"Title",label:"\u6807\u9898",rules:[{required:!0}],children:(0,t.jsx)(V.Z,{})}),(0,t.jsx)(s.Z.Item,{name:"Content",label:"\u5185\u5BB9",rules:[{required:!0}],children:(0,t.jsx)(V.Z.TextArea,{})}),(0,t.jsx)(s.Z.Item,{name:"CategoryId",label:"\u5206\u7C7B",rules:[{required:!0}],children:(0,t.jsx)(V.Z,{})}),(0,t.jsx)(s.Z.Item,{name:"ShowTime",label:"\u5C55\u793A\u65F6\u95F4",rules:[{required:!0}],children:(0,t.jsx)(G.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})}),(0,t.jsx)(s.Z.Item,{name:"image",label:"\u89C6\u9891",rules:[{required:!1}],children:(0,t.jsx)(X.Z,(0,r.Z)((0,r.Z)({},p),{},{children:(0,t.jsx)(M.Z,{icon:(0,t.jsx)(P,{}),children:"Click to Upload"})}))}),(0,t.jsx)(s.Z.Item,{wrapperCol:(0,r.Z)((0,r.Z)({},f.wrapperCol),{},{offset:8})}),(0,t.jsx)(s.Z.Item,{wrapperCol:(0,r.Z)((0,r.Z)({},f.wrapperCol),{},{offset:8}),children:(0,t.jsx)(M.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})},b=$;function L(){var g=(0,c.useRef)(),v=(0,c.useState)(),m=(0,j.Z)(v,2),x=m[0],l=m[1],D=(0,c.useState)(),y=(0,j.Z)(D,2),U=y[0],N=y[1],S=[{dataIndex:"id",title:"ID",copyable:!0,ellipsis:!0},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{title:"\u5C55\u793A\u65F6\u95F4",dataIndex:"show_time",sorter:!0,hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created_at",dataIndex:"created_at",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(Z,p){return(0,t.jsx)("a",{onClick:function(){N(p),l(!0)},children:"\u4FEE\u6539"})}}];return(0,t.jsxs)("div",{children:[(0,t.jsx)(R.Z,{onCancel:function(){l(!1)},footer:null,visible:x,destroyOnClose:!0,afterClose:function(){N(void 0)},children:(0,t.jsx)(b,{clickItem:U,closeModal:function(){l(!1),g.current.reload()}})}),(0,t.jsx)(H.ZP,{columns:S,actionRef:g,request:(0,W.Z)(F().mark(function i(){var Z,p,f,T,u,n,a=arguments;return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Z=a.length>0&&a[0]!==void 0?a[0]:{},p=a.length>1?a[1]:void 0,f=a.length>2?a[2]:void 0,console.log(p,f),T={pageNum:Z.current,pageSize:Z.pageSize},o.next=7,(0,C.hF)(T);case 7:return u=o.sent,n=u.data.data,console.log("list: ",n),o.abrupt("return",Promise.resolve({data:n,success:!0,total:u.data.total}));case 11:case"end":return o.stop()}},i)})),rowKey:"id",search:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u89C6\u9891\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(M.Z,{onClick:function(){l(!0)},icon:(0,t.jsx)(B.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")]}})]})}}}]);
