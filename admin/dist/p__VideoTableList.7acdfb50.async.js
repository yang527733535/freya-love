(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[658],{54975:function(ae,H,e){"use strict";e.r(H),e.d(H,{default:function(){return te}});var le=e(40279),N=e(88591),J=e(66940),ne=e(64049),X=e(43334),f=e(28211),D=e(70486),I=e.n(D),u=e(59301),Q=e(60615),G=e(57848),E=e(45103),re=e(81130),A=e(59840),se=e(7156),b=e(77428),oe=e(58408),M=e(36838),n=e(36531),de=e(71838),j=e(99128),ue=e(41505),i=e(79538),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},w=P,L=e(23986),B=function(v,m){return u.createElement(L.Z,(0,n.Z)((0,n.Z)({},v),{},{ref:m,icon:w}))};B.displayName="UploadOutlined";var $=u.forwardRef(B),K=e(28950),q=e.n(K),t=e(37712),_=function(v){var m=v.closeModal,C=v.clickItem,l=C===void 0?null:C,R=i.Z.useForm(),U=(0,f.Z)(R,1),V=U[0],W=(0,u.useState)(),x=(0,f.Z)(W,2),S=x[0],O=x[1],T={name:"special_effects",action:"http://dev-chapters-back.stardustgod.com/api/common/uploadSpecialEffects",headers:{Authorization:"Bearer eyJpdiI6ImdkY1JkUHJOWnZGYVF5MkFxMWtpUEE9PSIsInZhbHVlIjoieDJ3SDJYNGphbEljQUxjd1ZHY1RtQ2gzWWRLWTYrbXhnUEdtOEJzK2RcL3M1T25NMWtNMG9vWEc3YzFHTytUeFByXC9aXC9LcjRCOXhTd08yVGFIUkNNbjBzR1Y2Y2pBZ0xqRSt6TVZlVXpMWEN6OTR3OUFzZnFpVjZuM1pNT20rbmJWZVVYYkxQU0VUOXhwbzBNWU5la21zd3RYSHVUa0E2NTdZc0FJelJFMkdnK2trNE8wdWJaSEZncFhId1ZQMnk3dzNrd29VY2V3TlpHZXhuSEVaNU1TSFhXVUJ4dzN6bGs0YUlOMlNRRFpFa2Fyeld2NDBXZWxsM2oyWmpzeDhyY0toWEVQYkVRNFVieGxvMG1COUNwaUhMdnZnXC9uQ1wvUzFjV3ByRElPRFR0QXpyNGpmQzFEUnVLek51VElQRk5XSTF2ZnQ3TXhkY3hmaXAwV053aUFvQ3pEWVhqVmphbEhjSkdkRUE0eHpTVFJqUHIyQVVkbEdPaFhsZzRFS09HbEhGMjN2Ym5ZOWpIWnlEdlB1U0ZpbFp2NElrSG5KTmlHKzU5ZklXMXF3bDRuNkQrRklTRjQxVENUclFOamJNaXVmUXZMTVo5Vkx4VjlaSU9LSE5Wckc4TFUyaXJVM1MreWJGRTlnNUE0NVVCb1duZUxzaHRJR1RZNVB2OWNqZTNtSENjV2h6WWNkUXZIa1huT1lqVkhlSmc9PSIsIm1hYyI6ImJiNWZjYTdlOWI2YWIxZTY0MDJiYjEyYTRhYzY5NGFlYjRhNDJlYWRmNmYxOTIwOTJkNjFiMWIwZmRmZTM4NjUifQ"},onChange:function(r){if(r.file.status!=="uploading",r.file.status==="done"){var o=r.file.response.data;O(o.url),j.default.success("".concat(r.file.name," file uploaded successfully"))}else r.file.status==="error"&&j.default.error("".concat(r.file.name," file upload failed."))}},F={labelCol:{span:6},wrapperCol:{span:16}},Y=function(){var Z=(0,J.Z)(I().mark(function r(o){var a,d,c;return I().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(delete o.avatar,delete o.image,delete o.key,a=(0,n.Z)((0,n.Z)({},o),{},{VideoUrl:S}),a.ShowTime=o.ShowTime.format("YYYY-MM-DD HH:mm:ss"),l){s.next=13;break}return console.log(a),s.next=9,(0,E.M$)(a);case 9:d=s.sent,d.code===200&&(m(),j.default.success("\u521B\u5EFA\u6210\u529F")),s.next=18;break;case 13:return a.id=l.id,s.next=16,(0,E.HH)(a);case 16:c=s.sent,c.code===200&&(m(),j.default.success("\u521B\u5EFA\u6210\u529F"));case 18:case"end":return s.stop()}},r)}));return function(o){return Z.apply(this,arguments)}}();return(0,u.useEffect)(function(){if(l){console.log("clickItem: ",l);var Z={Title:l.title,Content:l.content,CategoryId:l.category_id,ShowTime:q()(l.show_time,"YYYY-MM-DD HH:mm:ss")};V.setFieldsValue(Z)}},[]),(0,t.jsx)("div",{children:(0,t.jsxs)(i.Z,(0,n.Z)((0,n.Z)({form:V,initialValues:{CategoryId:6}},F),{},{name:"nest-messages",onFinish:Y,children:[(0,t.jsx)(i.Z.Item,{name:"Title",label:"\u6807\u9898",rules:[{required:!0}],children:(0,t.jsx)(M.Z,{})}),(0,t.jsx)(i.Z.Item,{name:"Content",label:"\u5185\u5BB9",rules:[{required:!0}],children:(0,t.jsx)(M.Z.TextArea,{})}),(0,t.jsx)(i.Z.Item,{name:"CategoryId",label:"\u5206\u7C7B",rules:[{required:!0}],children:(0,t.jsx)(M.Z,{})}),(0,t.jsx)(i.Z.Item,{name:"ShowTime",label:"\u5C55\u793A\u65F6\u95F4",rules:[{required:!0}],children:(0,t.jsx)(b.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})}),(0,t.jsx)(i.Z.Item,{name:"image",label:"\u89C6\u9891",rules:[{required:!1}],children:(0,t.jsx)(A.Z,(0,n.Z)((0,n.Z)({},T),{},{children:(0,t.jsx)(N.Z,{icon:(0,t.jsx)($,{}),children:"Click to Upload"})}))}),(0,t.jsx)(i.Z.Item,{wrapperCol:(0,n.Z)((0,n.Z)({},F.wrapperCol),{},{offset:8})}),(0,t.jsx)(i.Z.Item,{wrapperCol:(0,n.Z)((0,n.Z)({},F.wrapperCol),{},{offset:8}),children:(0,t.jsx)(N.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})},ee=_;function te(){var y=(0,u.useRef)(),v=(0,u.useState)(),m=(0,f.Z)(v,2),C=m[0],l=m[1],R=(0,u.useState)(),U=(0,f.Z)(R,2),V=U[0],W=U[1],x=(0,u.useState)(!1),S=(0,f.Z)(x,2),O=S[0],T=S[1],F=(0,u.useState)(),Y=(0,f.Z)(F,2),Z=Y[0],r=Y[1],o=[{dataIndex:"id",title:"ID",copyable:!0,ellipsis:!0},{title:"\u6807\u9898",dataIndex:"title",ellipsis:!0},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{title:"\u89C6\u9891\u5730\u5740",dataIndex:"video_url",render:function(d){return(0,t.jsx)("a",{onClick:function(){T(!0),W(d)},children:"\u9884\u89C8\u89C6\u9891"})}},{title:"\u5C55\u793A\u65F6\u95F4",dataIndex:"show_time",sorter:!0,hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created_at",dataIndex:"created_at",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(d,c){return(0,t.jsx)("a",{onClick:function(){r(c),l(!0)},children:"\u4FEE\u6539"})}}];return(0,t.jsxs)("div",{children:[(0,t.jsx)(X.Z,{destroyOnClose:!0,onCancel:function(){T(!1)},title:"\u67E5\u770B\u89C6\u9891",visible:O,children:(0,t.jsx)("video",{style:{width:"100%"},controls:!0,src:"http://cdnoss.stardustgod.com/".concat(V),children:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002"})}),(0,t.jsx)(X.Z,{onCancel:function(){l(!1)},footer:null,visible:C,destroyOnClose:!0,afterClose:function(){r(void 0)},children:(0,t.jsx)(ee,{clickItem:Z,closeModal:function(){l(!1),y.current.reload()}})}),(0,t.jsx)(G.ZP,{columns:o,actionRef:y,request:(0,J.Z)(I().mark(function a(){var d,c,g,s,z,k,h=arguments;return I().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=h.length>0&&h[0]!==void 0?h[0]:{},c=h.length>1?h[1]:void 0,g=h.length>2?h[2]:void 0,console.log(c,g),s={pageNum:d.current,pageSize:d.pageSize},p.next=7,(0,E.hF)(s);case 7:return z=p.sent,k=z.data.data,console.log("list: ",k),p.abrupt("return",Promise.resolve({data:k,success:!0,total:z.data.total}));case 11:case"end":return p.stop()}},a)})),rowKey:"id",search:!1,pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u89C6\u9891\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(N.Z,{onClick:function(){l(!0)},icon:(0,t.jsx)(Q.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")]}})]})}}}]);
